<html>
  <head>
  <!--<script src="/components/jquery/dist/jquery.js"></script>-->
    <script src="//code.jquery.com/jquery-1.10.2.js"></script>

    <script>
    
    var conf;
  $(function() {
    var hash = window.location.hash;
      conf = JSON.parse(decodeURIComponent(hash.substr(1)));
      // document.write(JSON.stringify(conf));
      console.log(conf);
      console.log(window.location.search);
      // var options = { color: 'white', border: true };
      //document.location = 'pebblejs://close#' + encodeURIComponent(JSON.stringify(conf));
      
      if (conf.maker) {
        $('#makerKey').val(conf.maker);
      }
      
      renderList("#eventList", conf.events);
      renderList("#valueList", conf.values);

      $('#save').click(function(){
		  conf.maker = $('#makerKey').val();
		  $('#message').text(JSON.stringify(conf))
		        //document.location = 'pebblejs://close#' + encodeURIComponent(JSON.stringify(conf));

		  });
		  
      $('#reset').click(function(){
        conf.maker = "";
        conf.events = [];
        conf.values = [];
        $('#makerKey').val("");
        renderList("#eventList", conf.events);
        renderList("#valueList", conf.values);
      });
      $('#addEvent').click(function(){
        conf.events.push({title: $('#eventName').val()});
        renderList("#eventList", conf.events);
        $('#eventName').val("");
      });
      $('#addValue').click(function(){
        conf.values.push({title: $('#valueName').val()});
        renderList("#valueList", conf.values);
        $('#valueName').val("");
      });
  });
  
  function renderList(id, values) {
      if (values) {
        var listDiv = $(id);
        listDiv.empty();
        for (var i = 0 ; i < values.length; i ++) {
          $(id).append("<div>" + values[i].title +"</div>");
        }
      }
  }
  </script>
  </head>
  <body>
IFlocation allows you setup the IFTTT Maker Key, Events and Values here, and creates Trigger in your Pebble watch.

    <form>

  <p>Maker Key: <input type="text" id="makerKey" name="makerKey" placeholder="IFTTT Maker Key"></p>
  <p>Events: <input type="text" id="eventName" name="eventName" placeholder="Event name in Maker channel">
    <a id="addEvent" href="javascript:void(0)">Add</a>
    <div id="eventList"></div>
  </p>
  <p>Values: <input type="text" id="valueName" name="valueName" placeholder="Value can be selected in watch app">
    <a id="addValue" href="javascript:void(0)">Add</a>
    <div id="valueList"></div>
  </p>
  <a id="reset" href="javascript:void(0)">Reset</a>
  <a id="save" href="javascript:void(0)">Save</a>
</form>
--<div id="message"></div>--
  </body>
</html>
